<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Join Team</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h1>Welcome to the Escape Room!</h1>
  <form id="teamForm">
    <input type="text" id="teamIdInput" placeholder="Enter team ID" required />
    <button type="submit">Join Team</button>
  </form>
</body>
<script>
// Initialize the socket globally
  window.socket = io();
  // Save the socket.id directly to sessionStorage after socket is declared
  sessionStorage.setItem('socketId', socket.id);
  // Handle the form submit where player chooses a team
  document.getElementById('teamForm').addEventListener('submit', (e) => {
    e.preventDefault();

    // Get the team ID from the input field
    const teamId = document.getElementById('teamIdInput').value.trim();

    if (!teamId) {
      alert('Please enter a team ID!');
      return;
    }

    // Send team ID to the server
    socket.emit('joinTeam', { teamId });
  });

  // If the team is full, redirect to game.html
  socket.on('teamReady', () => {
    window.location.href = '/game_temp.html';
  });

  // Handle general errors
  socket.on('errorJoiningTeam', (error) => {
    alert('Error: ' + error.message);
  });

  // Listen for redirection events from the server
  socket.on('redirect', (data) => {
    window.location.href = data.url;
  });

  
</script>
</html>

